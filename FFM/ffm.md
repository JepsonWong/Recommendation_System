# FFM

[推荐系统召回四模型之二：沉重的FFM模型](https://zhuanlan.zhihu.com/p/59528983)

* FM模型可以看做是FFM模型的一个特例，FFM的全称是Field-aware FM，直观翻译过来，就是能够意识到特征域(Field)的存在的FM模型。相比FM，FMM参数量大；而且计算复杂度是n\*n，不可以像FM那样改写成n的复杂度。
* FM/FMM这些模型做召回和排序的区别：(1)排序阶段使用FM/FFM或者其他模型，因为此时用户已知，要排序的具体是哪篇文章也知道（通过召回阶段拉回来少量的文章），都在模型面前摆着，此时模型的任务是要判断用户是否对某篇文章感兴趣，所以用户特征和物料特征可以同时作为模型的输入。(2)如果是在召回阶段使用FM/FFM模型，我们现在只知道是哪个用户在浏览，用户特征都是全的，但是面对的判断对象是千万量级的文章。这样模型的任务是：只拿着用户特征，去千万量级的文章库里**找出一小批用户可能感兴趣的文章**出来，而且**速度要够快**。(3)所以在召回阶段，因为用户特征和物料特征不能同时作为模型的输入，那么我们需要对它们分别处理。具体做法是，采用某个模型，**离线把用户特征打包成用户embedding**，代表用户兴趣向量；同时可以离线或者近乎在线地把物料特征也单独打包，打成物料embedding，需要将两类特征分离。
* FFM召回模型：如何根据FFM计算原则构建用户Embedding以及物品Embedding；用户Embedding和物品Embedding内积计算符合FFM计算原则吗；加入用户侧及物品侧内部特征组合；如何加入一阶项；如何加入场景上下文特征（有些上下文特征是近乎实时变化的）

[推荐系统遇上深度学习(二)--FFM模型理论和实践](https://www.jianshu.com/p/781cde3d5f3d)

* FFM模型中引入了类别的概念，即field。在FFM中，针对每一维特征，针对每一种field，都会学习一个隐向量。假设样本的n个特征属于f个field，那么FFM的二次项有nf个隐向量；而在FM模型中，每个特征的隐向量只有一个；FM可以看作FFM的特例，是把所有特征都归属到一个field时的FFM模型。
* 由于隐向量与field相关，FFM二次项并不能够化简，其预测复杂度是O(knn)（隐向量的长度为k，样本特征个数为n）。

